<html>
<head>
<script type="text/javascript" src="octtree.js"></script>
<script type="text/javascript" src="glMatrix-min.js"></script>
<script type="text/javascript">
var objs = new Array();
var objCount = 10000;
for (var i = 0; i < objCount; ++i) {
	var o = vec3.create();
    o[octtree.x] = (2000 * Math.random()) - 1000;
    o[octtree.y] = (2000 * Math.random()) - 1000;
    o[octtree.z] = (2000 * Math.random()) - 1000;
    var obj = new Object();
    obj.pos = o;
    objs.push(obj);
}
var tree = undefined;
var elapsed = 0;
for (var c = 0; c < 10; ++c) {
    tree = octtree.create(-10000, 10000, -10000, 10000, -10000, 10000);
    var start = (new Date).getTime();
    for (var i = 0; i < objs.length; ++i) {
        tree.add(objs[i]);
    }
    var end = (new Date).getTime();
    elapsed += (end - start);
}
document.write("Insert objects: " + (elapsed / 10) + "ms per " + objCount + " objs <br />\n");
elapsed = 0;
var found = 0;
for (var c = 0; c < 10; ++c) {
	var o = new Object();
	o.x = 0; o.y = 0; o.z = 0;
    var start = (new Date).getTime();
	for (var i = 0; i < objs.length; ++i) {
		var results = tree.findInRadius(objs[i].pos, 100);
		found += results.length;
	}
    var end = (new Date).getTime();
    elapsed += (end - start);
}
document.write("Queries: " + (elapsed / (10 * objCount)) +
	    "ms/query each query found " + (found / (10 * objCount)) +
	    " objects<br />\n");
</script>
</head>
<body>
</body>
</html>